(this["webpackJsonpsaga-showcase"]=this["webpackJsonpsaga-showcase"]||[]).push([[0],{45:function(e,t,c){},47:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},53:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},58:function(e,t,c){"use strict";c.r(t);var n=c(26),a=c(1),r=c(23),s=c.n(r),o=c(35),i=c(7),f=c(13),l=c(21),u=c(36),d={},j=Object(u.a)({sagaMonitor:d}),p={stub:Object(l.b)({name:"stub",initialState:{},reducers:{}}).reducer},b=c(6),O=c.n(b),h=c(9),y=O.a.mark(m),x=O.a.mark(v);function m(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)({type:"PUT_ACTION"});case 2:case"end":return e.stop()}}),y)}function v(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.e)("Click",m);case 2:case"end":return e.stop()}}),x)}var g=O.a.mark(S),k=O.a.mark(_);function S(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,"fn_arg";case 2:return t.next=4,Object(h.a)((function(e){return e}),"call_fn_arg");case 4:return e=t.sent,t.next=7,e;case 7:case"end":return t.stop()}}),g)}function _(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.f)("Click",S);case 2:case"end":return e.stop()}}),k)}var w=O.a.mark(N),C=O.a.mark(M),I=O.a.mark(T);function N(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)({type:"CHAIN_1"});case 2:case"end":return e.stop()}}),w)}function M(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.c)({type:"CHAIN_2"});case 2:case"end":return e.stop()}}),C)}function T(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.e)("Click",N);case 2:return e.next=4,Object(h.e)("CHAIN_1",M);case 4:case"end":return e.stop()}}),I)}var E=O.a.mark(R),H=O.a.mark(B),A=O.a.mark(D);function R(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(B,"users");case 2:return e.next=4,Object(h.d)(B,"comments");case 4:case"end":return e.stop()}}),E)}function B(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.c)({type:e});case 2:case"end":return t.stop()}}),H)}function D(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)(R);case 2:case"end":return e.stop()}}),A)}var F=[{slug:"example-1",name:"Basic example",code:"   function* actions() {\n        yield put({ type: 'PUT_ACTION' });\n    };\n\n    export function* rootSaga() {\n        yield takeEvery('Click', actions);\n    };\n",rootSaga:v},{slug:"example-2",name:"Functions",code:"   function* functions() {\n        yield (arg => arg)('fn_arg');\n        const callRes = yield call(arg => arg , 'call_fn_arg');\n        yield callRes;\n    };\n\n    export function* rootSaga() {\n        yield takeLatest('Click', functions);\n    };\n",rootSaga:_},{slug:"example-3",name:"Chaining sagas",code:"   function* chain1() {\n        yield put({ type: 'CHAIN_1' })\n    };\n\n    function* chain2() {\n        yield put({ type: 'CHAIN_2' })\n    };\n\n    export function* rootSaga() {\n        yield takeEvery('Click', chain1);\n        yield takeEvery('CHAIN_1', chain2);\n    };\n",rootSaga:T},{slug:"example-4",name:"Fork vs Spawn",code:"   function* fetchAll() {\n        yield fork(fetchResource, 'users');\n        yield spawn(fetchResource, 'comments');\n    }\n    \n    function* fetchResource(resource) {\n        yield put({ type: resource });\n    }\n    \n    export function* rootSaga() {\n        yield call(fetchAll);\n    }\n",rootSaga:D}],J=c(10),z=c(16),L=(c(45),c(2)),K=function(e){var t=e.id,c=e.name,n=e.mod,r=e.payload,s=e.disabled,o=e.fullInfo,i=function(e,t){switch(e){case"FORK":return{modificator:"fork",additionalText:String(t.fn)};case"CALL":return{modificator:"call",additionalText:String(t.fn)};case"TAKE":return{modificator:"take"};default:return{modificator:""}}}(n,r),f=i.modificator,l=i.additionalText,u=Object(a.useCallback)((function(){o&&console.log(o)}),[o]);return Object(L.jsxs)("div",{className:"block ".concat(f?"block_".concat(f):""," ").concat(s?"block_disabled":""),title:o,onClick:u,children:[Object(L.jsx)("div",{className:"block__main-text",children:t?"".concat(t,": ").concat(c):c}),Object(L.jsx)("div",{className:"block__add-text",children:l})]})},P=(c(47),function(e){var t=e.actionHistory;return Object(L.jsxs)("div",{className:"action-history",children:[Object(L.jsx)("h3",{children:"Actions Dispatched"}),Object(L.jsx)("div",{className:"action-history__items",children:t.map((function(e,t){var c=e.type;return Object(L.jsx)(K,{mod:c,name:c},"".concat(c,"_").concat(t))}))})]})}),U=c(32),q=c.n(U),G=(c(48),function(e){var t=e.code;return Object(a.useEffect)((function(){q.a.highlightAll()}),[]),Object(L.jsx)("div",{children:Object(L.jsx)("pre",{children:Object(L.jsx)("code",{className:"language-javascript",children:t})})})}),Q=function(e){switch(e){case"effectTriggered":return"\ud83d\udd25";case"effectResolved":return"\ud83c\udfc1";case"actionDispatched":return"\ud83c\udfac";default:return""}},V=(c(49),function(e){var t=e.type,c=e.isCurrent,n=e.index,r=e.content,s=e.onClick,o=Object(a.useCallback)((function(){s(n)}),[n,s]);return Object(L.jsxs)("button",{className:"effects-history__item ".concat(c?"effects-history__item_current":""),onClick:o,children:[Object(L.jsxs)("div",{className:"effects-history__item-prefix",children:[Object(L.jsx)("div",{className:"effects-history__item-icon",children:Q(t)}),Object(L.jsx)("div",{className:"effects-history__item-type",children:t})]}),Object(L.jsx)("div",{className:"effects-history__item-content",children:r})]})}),W=(c(50),function(e){var t=e.history,c=e.onItemClick,n=e.effectsMap,a=e.currentIndex;return Object(L.jsxs)("div",{className:"effects-history",children:[Object(L.jsx)("h3",{children:"History"}),Object(L.jsx)("div",{className:"effects-history__items",children:t.map((function(e,t){var r=e.type,s=e.effectId,o=n[s],i=a===t,f=o&&o.effect.type?"".concat(s,": ").concat(o.effect.type):s||"";return Object(L.jsx)(V,{type:r,isCurrent:i,index:t,content:f,onClick:c},"".concat(r).concat(s).concat(t))}))})]})}),X=c(33),Y=c.n(X),Z=(c(53),function e(t){var c=t.effectsTree,n=t.effectsMap,a=t.resolvedEffectsMap;return c.map((function(t){var c=t.key,r=t.children,s=n[c],o=s.effectId,i=s.parentEffectId,f=s.effect,l=Boolean(a[c]),u=Object(L.jsx)(K,{disabled:l,parentEffectId:i,id:o,name:f.type||f,mod:f.type,payload:f.payload,fullInfo:Y.a.stringify(n[c])},o);return r?Object(L.jsxs)("div",{children:[u,Object(L.jsx)("div",{className:"effects-visualizer__row",children:Object(L.jsx)(e,{effectsTree:r,effectsMap:n,resolvedEffectsMap:a})})]},o):u}))}),$=(c(54),function(e){var t=e.rootSagaStarted,c=e.effectsMap,n=e.effectsTree,a=e.resolvedEffectsMap;return Object(L.jsxs)("div",{className:"effects-visualizer",children:[Object(L.jsx)("h3",{children:"Effects"}),Object(L.jsxs)("div",{children:[t&&Object(L.jsx)("h4",{className:"effects-visualizer__success-subtitle",children:"\u2714\ufe0f Root Saga Started"}),Boolean(n.length)&&Object(L.jsx)(Z,{effectsTree:n,effectsMap:c,resolvedEffectsMap:a})]})]})}),ee=(c(55),function(e){var t=e.effectsState,c=e.history,n=e.onHistoryItemClick,r=e.effectsMap,s=e.handleButtonClick,o=e.currentHistoryItemIndex,i=e.code,f=t.rootSagaStarted,l=t.effectsTree,u=t.actionHistory,d=t.resolvedEffectsMap,j=Object(a.useCallback)((function(){s()}),[]);return Object(L.jsxs)("div",{className:"app",children:[Object(L.jsx)("nav",{children:Object(L.jsx)("ul",{children:F.map((function(e){var t=e.slug,c=e.name;return Object(L.jsx)("li",{children:Object(L.jsx)("a",{href:"/".concat(t),children:c})},t)}))})}),i&&Object(L.jsx)(G,{code:i}),Object(L.jsx)("button",{className:"app__action-button",onClick:j,children:"Dispatch Action"}),Object(L.jsxs)("div",{className:"app__effects",children:[Object(L.jsx)($,{rootSagaStarted:f,effectsMap:r,effectsTree:l,resolvedEffectsMap:d}),Object(L.jsx)(W,{history:c,onItemClick:n,effectsMap:r,currentIndex:o}),Object(L.jsx)(P,{actionHistory:u})]})]})}),te=function(e){return JSON.parse(JSON.stringify(e))},ce=c(20),ne=c(34),ae=new(c.n(ne).a)({childrenField:"children",keyField:"key"}),re=function(e,t,c){var n=te(e),a=ae.findNodes(n,(function(e){return e.key===String(c)})),r=Object(z.a)(a,1)[0],s=String(t);return r?r.children?r.children=[].concat(Object(f.a)(r.children),[{key:s}]):r.children=[{key:s}]:n.push({key:s}),n},se=function(e,t){switch(t.type){case"rootSagaStarted":return Object(J.a)(Object(J.a)({},e),{},{rootSagaStarted:!0});case"effectTriggered":var c=t.payload,n=c.effectId,a=c.parentEffectId;return Object(J.a)(Object(J.a)({},e),{},{effectsTree:re(e.effectsTree,n,a),effectsMap:Object(J.a)(Object(J.a)({},e.effectsMap),{},Object(ce.a)({},String(n),t.payload))});case"actionDispatched":return Object(J.a)(Object(J.a)({},e),{},{actionHistory:[].concat(Object(f.a)(e.actionHistory),[t.payload])});case"effectResolved":return Object(J.a)(Object(J.a)({},e),{},{resolvedEffectsMap:Object(J.a)(Object(J.a)({},e.resolvedEffectsMap),{},Object(ce.a)({},t.payload,!0))});default:throw new Error}},oe=!1,ie=[],fe=[],le=function(e){var t=e.sagaMonitor,c=e.sagaMiddleware,r=e.rootSaga,s=e.code,o=Object(n.b)(),i=Object(a.useState)([]),l=Object(z.a)(i,2),u=l[0],d=l[1],j=Object(a.useState)([]),p=Object(z.a)(j,2),b=p[0],O=p[1],h=Object(a.useReducer)(se,{rootSagaStarted:!1,effectsMap:{},actionHistory:[],resolvedEffectsMap:{},effectsTree:[]}),y=Object(z.a)(h,2),x=y[0],m=y[1],v=Object(a.useState)(null),g=Object(z.a)(v,2),k=g[0],S=g[1],_=Object(a.useState)(null),w=Object(z.a)(_,2),C=w[0],I=w[1],N=Object(a.useCallback)((function(e,t){ie=e,t&&d(ie)}),[]),M=Object(a.useCallback)((function(e){var t=b[e+1]?b[e+1].effectsState:null;S(t),I(e)}),[b]),T=Object(a.useCallback)((function(){S(null),I(null),o({type:"Click"})}),[]);return Object(a.useEffect)((function(){u.length?(oe=!0,setTimeout((function(){var e=u[u.length-1];m(e),N(ie.slice(0,-1),!0),fe=[].concat(Object(f.a)(fe),[{type:e.type,effectId:"object"===typeof e.payload?e.payload.effectId:e.payload,effectsState:Object(J.a)(Object(J.a)({},x),{},{effectsTree:te(x.effectsTree)})}]),O(fe)}),500)):oe=!1}),[u]),Object(a.useEffect)((function(){t.rootSagaStarted=function(e){N([{type:"rootSagaStarted",payload:e.effectId}].concat(Object(f.a)(ie)),!oe)},t.effectTriggered=function(e){N([{type:"effectTriggered",payload:e}].concat(Object(f.a)(ie)),!oe)},t.actionDispatched=function(e){N([{type:"actionDispatched",payload:e}].concat(Object(f.a)(ie)),!oe)},t.effectResolved=function(e){N([{type:"effectResolved",payload:e}].concat(Object(f.a)(ie)),!oe)},c.run(r)}),[]),Object(L.jsx)(ee,{effectsState:null===k?x:k,effectsMap:x.effectsMap,history:b,onHistoryItemClick:M,handleButtonClick:T,currentHistoryItemIndex:C,code:s})},ue=(c(56),Object(l.a)({reducer:p,middleware:[j].concat(Object(f.a)(Object(l.c)()))}));s.a.render(Object(L.jsx)(n.a,{store:ue,children:Object(L.jsx)(o.a,{basename:"/saga-showcase",children:Object(L.jsxs)(i.d,{children:[F.map((function(e){var t=e.slug,c=e.code,n=e.rootSaga;return Object(L.jsx)(i.b,{path:"/".concat(t),children:Object(L.jsx)(le,{sagaMonitor:d,sagaMiddleware:j,rootSaga:n,code:c})},t)})),Object(L.jsx)(i.a,{from:"/",to:"/".concat(F[0].slug)})]})})}),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.b76ebd8c.chunk.js.map